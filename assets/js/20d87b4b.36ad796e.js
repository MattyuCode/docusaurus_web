"use strict";(self.webpackChunkdoc_api_whats_app=self.webpackChunkdoc_api_whats_app||[]).push([[173],{3905:(e,a,r)=>{r.d(a,{Zo:()=>c,kt:()=>g});var t=r(7294);function n(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function i(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function o(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?i(Object(r),!0).forEach((function(a){n(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}function l(e,a){if(null==e)return{};var r,t,n=function(e,a){if(null==e)return{};var r,t,n={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],a.indexOf(r)>=0||(n[r]=e[r]);return n}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],a.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=t.createContext({}),p=function(e){var a=t.useContext(s),r=a;return e&&(r="function"==typeof e?e(a):o(o({},a),e)),r},c=function(e){var a=p(e.components);return t.createElement(s.Provider,{value:a},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},m=t.forwardRef((function(e,a){var r=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(r),m=n,g=u["".concat(s,".").concat(m)]||u[m]||d[m]||i;return r?t.createElement(g,o(o({ref:a},c),{},{components:r})):t.createElement(g,o({ref:a},c))}));function g(e,a){var r=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=m;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[u]="string"==typeof e?e:n,o[1]=l;for(var p=2;p<i;p++)o[p]=r[p];return t.createElement.apply(null,o)}return t.createElement.apply(null,r)}m.displayName="MDXCreateElement"},7250:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var t=r(7462),n=(r(7294),r(3905));const i={sidebar_position:2},o=void 0,l={unversionedId:"API_WhatsApp-webjs/Iniciar_ApiWhatsApp",id:"API_WhatsApp-webjs/Iniciar_ApiWhatsApp",title:"Iniciar_ApiWhatsApp",description:"Crear el arhivo javascript",source:"@site/docs/API_WhatsApp-webjs/Iniciar_ApiWhatsApp.md",sourceDirName:"API_WhatsApp-webjs",slug:"/API_WhatsApp-webjs/Iniciar_ApiWhatsApp",permalink:"/docusaurus_web/docs/API_WhatsApp-webjs/Iniciar_ApiWhatsApp",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/API_WhatsApp-webjs/Iniciar_ApiWhatsApp.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Instalaci\xf3n",permalink:"/docusaurus_web/docs/API_WhatsApp-webjs/APIWhatsappwebjs"},next:{title:"Iniciar_Authenticacion",permalink:"/docusaurus_web/docs/API_WhatsApp-webjs/Iniciar_Authenticacion"}},s={},p=[{value:"Crear el arhivo javascript",id:"crear-el-arhivo-javascript",level:2},{value:"Lo iniciamos",id:"lo-iniciamos",level:3},{value:"Importar todas las dependencias",id:"importar-todas-las-dependencias",level:2},{value:"Configuramos el puerto para abrir en el navegador",id:"configuramos-el-puerto-para-abrir-en-el-navegador",level:2},{value:"Utilizar el Express",id:"utilizar-el-express",level:2},{value:"Crear un archivo html con el nombre index.html",id:"crear-un-archivo-html-con-el-nombre-indexhtml",level:3}],c={toc:p};function u(e){let{components:a,...i}=e;return(0,n.kt)("wrapper",(0,t.Z)({},c,i,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"crear-el-arhivo-javascript"},"Crear el arhivo javascript"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"creamos una arhivo javascript ",(0,n.kt)("strong",{parentName:"li"},"app.js")," y pegamos el siguiente codigo para ir probando la api y que nos genere un ",(0,n.kt)("strong",{parentName:"li"},"QR")," en la terminal")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'const qrcode = require("qrcode-terminal");\nconst { Client } = require("whatsapp-web.js");\nconst client = new Client();\n\nclient.on("qr", (qr) => {\n  qrcode.generate(qr, { small: true });\n});\n\nclient.on("ready", () => {\n  console.log("Cliente conectado!");\n});\n\nclient.initialize();\n')),(0,n.kt)("h3",{id:"lo-iniciamos"},"Lo iniciamos"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Abrir una nueva terminal para levantar la aplicacion")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-git"},"  node app\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Ahora ya deberiamos ver algo como esto\n",(0,n.kt)("img",{alt:"Docusaurus logo",src:r(3064).Z,width:"965",height:"747"}))),(0,n.kt)("h2",{id:"importar-todas-las-dependencias"},"Importar todas las dependencias"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Aqui declaramos todas las dependencias que vamos a estar utilizando")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'const { Client, MessageMedia, LocalAuth } = require("whatsapp-web.js");\nconst { body, validationResult } = require("express-validator");\n\nconst express = require("express");\nconst socketIo = require("socket.io");\nconst qrcode = require("qrcode");\nconst http = require("http");\nconst fs = require("fs");\nconst fileUpload = require("express-fileupload");\nconst axios = require("axios");\nconst mime = require("mime-types");\n\nconst app = express();\nconst server = http.createServer(app);\nconst io = socketIo(server);\n')),(0,n.kt)("h2",{id:"configuramos-el-puerto-para-abrir-en-el-navegador"},"Configuramos el puerto para abrir en el navegador"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Abajo de IO declaramos el puerto"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"const port = process.env.PORT || 6060;\n")),(0,n.kt)("h2",{id:"utilizar-el-express"},"Utilizar el Express"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"Abajo de PORT pegamos lo siguiente"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'app.use(express.json());\napp.use(\n  express.urlencoded({\n    extended: true,\n  })\n);\n\napp.use(\n  fileUpload({\n    debug: false,\n  })\n);\n\napp.get("/", (req, res) => {\n  res.sendFile("index.html", {\n    root: __dirname,\n  });\n});\n')),(0,n.kt)("h3",{id:"crear-un-archivo-html-con-el-nombre-indexhtml"},"Crear un archivo html con el nombre index.html"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"el html nos ayudara para poder ejecutar nuestra aplicacion en el navegador y que nos genere un ",(0,n.kt)("strong",{parentName:"li"},"QR"),(0,n.kt)("img",{alt:"Docusaurus logo",src:r(3646).Z,width:"830",height:"250"}))),(0,n.kt)("admonition",{title:"OJO: \ud83d\udc40\ud83d\udc40",type:"info"},(0,n.kt)("details",null,(0,n.kt)("summary",null,"Explicaci\xf3n del codigo anterior"),(0,n.kt)("ul",{parentName:"admonition"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"app.use(express.json());")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Esta l\xednea hace que Express utilice el middleware JSON, lo que significa que la aplicaci\xf3n puede manejar solicitudes y respuestas JSON."))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"app.use(\nexpress.urlencoded({\nextended: true, }) );")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},'permite que la aplicaci\xf3n maneje los datos enviados en el cuerpo de las solicitudes HTTP\ncon codificaci\xf3n URL. El par\xe1metro "extended: true" significa que se permitir\xe1n\nvalores de tipo objeto y matriz en lugar de solo valores de cadena.'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"app.use(\nfileUpload({\ndebug: false,}));")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},'permite a la aplicaci\xf3n manejar la carga de archivos en solicitudes HTTP.\nEl par\xe1metro "debug: false" desactiva los mensajes de depuraci\xf3n en la consola.'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},'app.get("/", (req, res) => {\nres.sendFile("index.html", {\nroot: ',"_","_","dirname, });});"),' - Este c\xf3digo define una ruta GET para la ra\xedz "/".\nCuando se reciba una solicitud GET en esta ruta,\nla respuesta ser\xe1 el archivo "index.html" en el directorio actual, especificado por { root: ',"_","_","dirname }"))))))}u.isMDXComponent=!0},3646:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/html-3a438c6e2ec5259bd04f5514bb917a5c.png"},3064:(e,a,r)=>{r.d(a,{Z:()=>t});const t=r.p+"assets/images/qr-cef298845683a8fae269c28378770a4f.png"}}]);